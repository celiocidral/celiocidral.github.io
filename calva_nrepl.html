<!DOCTYPE html>
<!-- saved from url=(0022)http://localhost:7777/ -->
<html class="overflow-hidden min-h-screen"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta content="width=device-width, initial-scale=1" name="viewport"><script src="./calva_nrepl_files/saved_resource" type="text/javascript"></script><script>tailwind.config = {
  darkMode: "class",
  content: ["./tw/viewer.js", "./tw/**/*.edn"],
  safelist: ['dark'],
  theme: {
    extend: {},
    fontFamily: {
      sans: ["Fira Sans", "-apple-system", "BlinkMacSystemFont", "sans-serif"],
      serif: ["PT Serif", "serif"],
      mono: ["Fira Mono", "monospace"]
    }
  },
  variants: {
    extend: {},
  },
  plugins: [],
}
</script><style type="text/tailwindcss">@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    font-size: 18px;
  }
  @media (max-width: 600px) {
    html {
      font-size: 16px;
    }
  }
  .font-condensed { font-family: "Fira Sans Condensed", sans-serif; }
  .font-inter     { font-family: "Inter", sans-serif; }
  body {
    @apply font-serif antialiased text-gray-900 sm:overscroll-y-none;
  }
  code, .code {
    @apply font-mono text-sm text-gray-900 bg-slate-50 px-0.5 py-px rounded dark:bg-gray-800;
  }
  code::before, code::after { @apply content-none !important; }
  h1, h3, h4, h5, h6 {
    @apply font-condensed font-bold mt-8 first:mt-0;
  }
  h2 {
    /*We cannot collapse margins due to nesting but we want to*/
    /*keep the h2’s large margin visible*/
    @apply font-condensed font-bold mt-8 first:mt-2;
  }
  h1 { @apply text-4xl; }
  h2 { @apply text-3xl; }
  h3 { @apply text-2xl; }

  button { @apply focus:outline-none; }
  strong { @apply font-bold; }
  em     { @apply italic; }
  pre    { @apply m-0 font-mono; }
}

/* Compatibility */
/* --------------------------------------------------------------- */
/* TODO: Verify which colors are in use and replace with Tailwind
   colors accordingly. Move Nj-specific styles out of here. */

:root {
  --teal-color: #31afd0;
  --dark-teal-color: #095960;
  --near-black-color: #2e2e2c;
  --red-color: #d64242;
  --dark-blue-color: #1f2937;
  --dark-blue-60-color: rgba(28, 42, 56, 0.6);
  --gray-panel-color: rgba(239, 241, 245, 1.000);
  --brand-color: var(--dark-blue-color);
  --link-color: #5046e4;
  --command-bar-selected-color: var(--teal-color);
}

.serif      { @apply font-serif; }
.sans-serif { @apply font-sans; }
.monospace  { @apply font-mono; }
.inter      { @apply font-inter; }

.border-color-teal { border-color: var(--dark-teal-color); }
.teal { color: var(--teal-color); }
.bg-dark-blue { background: var(--dark-blue-color); }
.bg-dark-blue-60 { background: rgba(28, 42, 56, 0.6); }
.bg-gray-panel { background: var(--gray-panel-color); }
.text-dark-blue  { color: var(--dark-blue-color); }
.text-dark-blue-60 { color: var(--dark-blue-60-color); }
.border-dark-blue-30 { border-color: rgba(28, 42, 56, 0.6); }
.text-brand { color: var(--dark-blue-color); }
.bg-brand { background: var(--dark-blue-color); }
.text-selected { color: white; }
.red { color: var(--red-color); }

/* Disclose Button */
/* --------------------------------------------------------------- */

.disclose {
  @apply content-none border-solid cursor-pointer inline-block relative mr-[3px] top-[-2px] transition-all;
  border-color: var(--near-black-color) transparent;
  border-width: 6px 4px 0;
}
.disclose:hover {
  border-color: var(--near-black-color) transparent;
}
.dark .disclose,
.dark .disclose:hover {
  border-color: white transparent;
}
.disclose.collapsed {
  @apply rotate-[-90deg];
}

/* Layout */
/* --------------------------------------------------------------- */

.page {
  @apply max-w-5xl mx-auto px-12 box-border flex-shrink-0;
}
.max-w-prose { @apply max-w-[46rem] !important; }
.max-w-wide  { @apply max-w-3xl !important; }

/* List Styles */
/* --------------------------------------------------------------- */

.task-list-item + .task-list-item,
.viewer-markdown ul ul {
  @apply mt-1 mb-0;
}

/* compact TOC */
.viewer-markdown .toc ul {
  list-style: none;
  @apply my-1;
}

/* Code Viewer */
/* --------------------------------------------------------------- */

.viewer-code {
  @apply font-mono bg-slate-100 rounded-sm text-sm overflow-x-auto dark:bg-gray-800;
}
.viewer-code .cm-content {
  @apply py-4 px-8;
}
@media (min-width: 960px){
  .viewer-notebook .viewer-code .cm-content {
    @apply py-4 pl-12;
  }
}
/* Don’t show focus outline when double-clicking cell in Safari */
.cm-scroller { @apply focus:outline-none; }

/* Syntax Highlighting */
/* --------------------------------------------------------------- */

.inspected-value { @apply text-xs font-mono leading-[1.25rem]; }
.cmt-strong, .cmt-heading { @apply font-bold; }
.cmt-italic, .cmt-emphasis { @apply italic; }
.cmt-strikethrough { @apply line-through; }
.cmt-link { @apply underline; }
.untyped-value { @apply whitespace-nowrap; }

.cm-editor, .cmt-default, .viewer-result {
  @apply text-slate-800 dark:text-slate-300;
}
.cmt-keyword {
  @apply text-purple-800 dark:text-pink-400;
}
.cmt-atom, .cmt-bool, .cmt-url, .cmt-contentSeparator, .cmt-labelName {
  @apply text-blue-900 dark:text-blue-300;
}
.cmt-inserted, .cmt-literal {
  @apply text-emerald-700 dark:text-emerald-200;
}
.cmt-string, .cmt-deleted {
  @apply text-rose-700 dark:text-sky-300;
}
.cmt-italic.cmt-string {
  @apply dark:text-sky-200;
}
.cmt-regexp, .cmt-escape {
  @apply text-orange-500 dark:text-orange-300;
}
.cmt-variableName {
  @apply text-blue-800 dark:text-sky-300;
}
.cmt-typeName, .cmt-namespace {
  @apply text-emerald-600 dark:text-emerald-300;
}
.cmt-className {
  @apply text-teal-600 dark:text-teal-200;
}
.cmt-macroName {
  @apply text-teal-700 dark:text-teal-200;
}
.cmt-propertyName {
  @apply text-blue-700 dark:text-blue-200;
}
.cmt-comment {
  @apply text-slate-500 dark:text-slate-400;
}
.cmt-meta {
  @apply text-slate-600 dark:text-slate-400;
}
.cmt-invalid {
  @apply text-red-500 dark:text-red-300;
}

.result-data {
  @apply font-mono text-sm overflow-x-auto whitespace-nowrap leading-normal;
}
.result-data::-webkit-scrollbar, .path-nav::-webkit-scrollbar {
  @apply h-0;
}
.result-data-collapsed {
  @apply whitespace-nowrap;
}
.result-data-field {
  @apply ml-4 whitespace-nowrap;
}
.result-data-field-link{
  @apply ml-4 whitespace-nowrap cursor-pointer;
}
.result-data-field-link:hover {
  @apply text-black bg-black/5;
}
.result-text-empty {
  color: rgba(0,0,0,.3);
}
.browsify-button:hover {
  box-shadow: -2px 0 0 2px #edf2f7;
}

/* Prose */
/* --------------------------------------------------------------- */

.viewer-notebook,
.viewer-markdown {
  @apply prose
    dark:prose-invert
    prose-a:text-blue-600 prose-a:no-underline hover:prose-a:underline
    dark:prose-a:text-blue-300
    prose-p:mt-4 prose-p:leading-snug
    prose-ol:mt-4 prose-ol:mb-6 prose-ol:leading-snug
    prose-ul:mt-4 prose-ul:mb-6 prose-ul:leading-snug
    prose-blockquote:mt-4 prose-blockquote:leading-snug
    prose-hr:mt-6 prose-hr:border-t-2 prose-hr:border-solid prose-hr:border-slate-200
    prose-figure:mt-4
    prose-figcaption:mt-2 prose-figcaption:text-xs
    prose-headings:mb-4
    prose-table:mt-0
    prose-th:mb-0
    prose-img:my-0
    prose-code:font-medium prose-code:bg-slate-100
    max-w-none;
}
.viewer-markdown blockquote p:first-of-type:before,
.viewer-markdown blockquote p:last-of-type:after {
  @apply content-none;
}

/* Images */
/* --------------------------------------------------------------- */


/* Todo Lists */
/* --------------------------------------------------------------- */

.contains-task-list {
  @apply pl-6 list-none;
}
.contains-task-list input[type="checkbox"] {
  @apply appearance-none h-4 w-4 rounded border border-slate-200 relative mr-[0.3rem] ml-[-1.5rem] top-[0.15rem];
}
.contains-task-list input[type="checkbox"]:checked {
  @apply border-indigo-600 bg-indigo-600 bg-no-repeat bg-contain;
  background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3e%3c/svg%3e");
}

/* Markdown TOC */
/* --------------------------------------------------------------- */

.viewer-markdown .toc      { @apply mt-4; }
.viewer-markdown h1 + .toc { @apply mt-8; }

.viewer-markdown .toc h1,
.viewer-markdown .toc h2,
.viewer-markdown .toc h3,
.viewer-markdown .toc h4,
.viewer-markdown .toc h5,
.viewer-markdown .toc h6 {
  @apply text-base text-indigo-600 font-sans my-0;
}
.viewer-markdown .toc a {
  @apply text-indigo-600 font-normal no-underline hover:underline;
}
.viewer-markdown .toc li    { @apply m-0; }
.viewer-markdown .toc ul ul { @apply pl-4; }

/* Notebook Spacing */
/* --------------------------------------------------------------- */

.viewer-notebook { @apply py-16; }
#clerk-static-app .viewer-notebook { @apply pt-[0.8rem] pb-16; }
.viewer-markdown *:first-child:not(.viewer-code):not(li):not(h2) { @apply mt-0; }
/*.viewer + .viewer { @apply mt-6; }*/
.viewer + .viewer-result { @apply mt-0; }
.viewer-code + .viewer-result { @apply mt-3; }
.viewer-markdown + .viewer-markdown { @apply mt-0; }

/* Sidenotes */
/* --------------------------------------------------------------- */

.sidenote-ref {
  @apply top-[-3px] inline-flex justify-center items-center w-[18px] h-[18px]
    rounded-full bg-slate-100 border border-slate-300 hover:bg-slate-200 hover:border-slate-300
    m-0 ml-[4px] cursor-pointer;
}
.sidenote {
  @apply hidden float-left clear-both mx-[2.5%] my-4 text-xs relative w-[95%];
}
.sidenote-ref.expanded + .sidenote {
  @apply block;
}
@media (min-width: 860px) {
  .sidenote-ref {
    @apply top-[-0.5em] w-auto h-auto inline border-0 bg-transparent m-0 pointer-events-none;
  }
  .sidenote sup { @apply inline; }
  .viewer-markdown .contains-sidenotes p { @apply max-w-[65%]; }
  .viewer-markdown p .sidenote {
    @apply mr-[-54%] mt-[0.2rem] w-1/2 float-right clear-right relative block;
  }
}
.viewer-code + .viewer:not(.viewer-markdown):not(.viewer-code):not(.viewer-code-folded),
.viewer-code-folded + .viewer:not(.viewer-markdown):not(.viewer-code):not(.viewer-code-folded),
.viewer-result + .viewer-result {
  @apply mt-2;
}
.viewer-code + .viewer-code-folded {
  @apply mt-4;
}
.viewer-result {
  @apply leading-tight mb-6;
}
.viewer-result figure {
  @apply mt-0 !important;
}
@media (min-width: 768px) {
  .devcard-desc > div {
    @apply max-w-full m-0;
  }
}

/* Command Palette */
/* --------------------------------------------------------------- */

.nj-commands-input {
  @apply bg-transparent text-white;
}
.nj-context-menu-item:hover:not([disabled]) {
  @apply cursor-pointer;
  background-color: rgba(255,255,255,.14);
}

/* Devdocs */
/* --------------------------------------------------------------- */

.logo, .logo-white {
  @apply block indent-[-999em];
  background: url(/images/nextjournal-logo.svg) center center no-repeat;
}
.devdocs-body {
  @apply font-inter;
}

/* Workarounds */
/* --------------------------------------------------------------- */

/* Fixes vega viewer resizing into infinity */
.vega-embed .chart-wrapper { @apply h-auto !important; }
/* fixes fraction separators being overridden by tw’s border-color */
.katex * { @apply border-black; }
</style><script src="./calva_nrepl_files/3J292uwuzpNFvuMeyWd1h7PtuAjBbUboke9HBHMhpRTTXYqgfxiaUGnx7396uTm879KgrLoMCFMF7qmdcHGAmw4f-viewer.js" type="module"></script><link href="./calva_nrepl_files/katex.min.css" rel="stylesheet" type="text/css"><link href="https://fonts.bunny.net/" rel="preconnect"><link href="./calva_nrepl_files/css" rel="stylesheet" type="text/css"><style>@tailwind base;@tailwind components;@tailwind utilities;/*! tailwindcss v3.2.4 | MIT License | https://tailwindcss.com*/*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:Fira Sans, -apple-system, BlinkMacSystemFont, sans-serif;font-feature-settings:normal}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:Fira Mono, monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]{display:none}html {
    font-size: 18px;
  }@media (max-width: 600px) {
    html {
      font-size: 16px;
    }
  }body{font-family:PT Serif, serif;--tw-text-opacity:1;color:rgb(17 24 39 / var(--tw-text-opacity));-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}@media (min-width: 640px){body{overscroll-behavior-y:none}}code, .code{border-radius:0.25rem;--tw-bg-opacity:1;background-color:rgb(248 250 252 / var(--tw-bg-opacity));padding-left:0.125rem;padding-right:0.125rem;padding-top:1px;padding-bottom:1px;font-family:Fira Mono, monospace;font-size:0.875rem;line-height:1.25rem;--tw-text-opacity:1;color:rgb(17 24 39 / var(--tw-text-opacity))}.dark code,.dark  .code{--tw-bg-opacity:1;background-color:rgb(31 41 55 / var(--tw-bg-opacity))}code::before, code::after{--tw-content:none !important;content:var(--tw-content) !important}h1, h3, h4, h5, h6 { font-family: "Fira Sans Condensed", sans-serif; margin-top:2rem; font-weight:700; }h1:first-child, h3:first-child, h4:first-child, h5:first-child, h6:first-child{margin-top:0px}h2 {
    /*We cannot collapse margins due to nesting but we want to*/
    /*keep the h2’s large margin visible*/ font-family: "Fira Sans Condensed", sans-serif; margin-top:2rem; font-weight:700;
  }h2:first-child{margin-top:0.5rem}h1{font-size:2.25rem;line-height:2.5rem}h2{font-size:1.875rem;line-height:2.25rem}h3{font-size:1.5rem;line-height:2rem}button:focus{outline:2px solid transparent;outline-offset:2px}strong{font-weight:700}em{font-style:italic}pre{margin:0px;font-family:Fira Mono, monospace}*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::-webkit-backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }
.fixed{position:fixed}
.relative{position:relative}
.top-2{top:0.5rem}
.left-2{left:0.5rem}
.z-10{z-index:10}
.flex{display:flex}
.h-5{height:1.25rem}
.h-screen{height:100vh}
.min-h-screen{min-height:100vh}
.w-5{width:1.25rem}
.w-full{width:100%}
.max-w-prose{max-width:65ch}
.flex-auto{flex:1 1 auto}
.cursor-pointer{cursor:pointer}
.flex-col{flex-direction:column}
.items-center{align-items:center}
.overflow-hidden{overflow:hidden}
.overflow-y-auto{overflow-y:auto}
.whitespace-pre{white-space:pre}
.px-8{padding-left:2rem;padding-right:2rem}
.text-slate-400{--tw-text-opacity:1;color:rgb(148 163 184 / var(--tw-text-opacity))}

/* Compatibility */
/* --------------------------------------------------------------- */
/* TODO: Verify which colors are in use and replace with Tailwind
   colors accordingly. Move Nj-specific styles out of here. */

:root {
  --teal-color: #31afd0;
  --dark-teal-color: #095960;
  --near-black-color: #2e2e2c;
  --red-color: #d64242;
  --dark-blue-color: #1f2937;
  --dark-blue-60-color: rgba(28, 42, 56, 0.6);
  --gray-panel-color: rgba(239, 241, 245, 1.000);
  --brand-color: var(--dark-blue-color);
  --link-color: #5046e4;
  --command-bar-selected-color: var(--teal-color);
}

.serif{font-family:PT Serif, serif}
.sans-serif{font-family:Fira Sans, -apple-system, BlinkMacSystemFont, sans-serif}
.monospace{font-family:Fira Mono, monospace}
.inter     { font-family: "Inter", sans-serif; }

.border-color-teal { border-color: var(--dark-teal-color); }
.teal { color: var(--teal-color); }
.bg-dark-blue { background: var(--dark-blue-color); }
.bg-dark-blue-60 { background: rgba(28, 42, 56, 0.6); }
.bg-gray-panel { background: var(--gray-panel-color); }
.text-dark-blue  { color: var(--dark-blue-color); }
.text-dark-blue-60 { color: var(--dark-blue-60-color); }
.border-dark-blue-30 { border-color: rgba(28, 42, 56, 0.6); }
.text-brand { color: var(--dark-blue-color); }
.bg-brand { background: var(--dark-blue-color); }
.text-selected { color: white; }
.red { color: var(--red-color); }

/* Disclose Button */
/* --------------------------------------------------------------- */

.disclose{position:relative;top:-2px;margin-right:3px;display:inline-block;cursor:pointer;border-style:solid;transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;--tw-content:none;content:var(--tw-content);
  border-color: var(--near-black-color) transparent;
  border-width: 6px 4px 0}
.disclose:hover {
  border-color: var(--near-black-color) transparent;
}
.dark .disclose,
.dark .disclose:hover {
  border-color: white transparent;
}
.disclose.collapsed{--tw-rotate:-90deg;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}

/* Layout */
/* --------------------------------------------------------------- */

.page{margin-left:auto;margin-right:auto;box-sizing:border-box;max-width:64rem;flex-shrink:0;padding-left:3rem;padding-right:3rem}
.max-w-prose{max-width:46rem !important}
.max-w-wide{max-width:48rem !important}

/* List Styles */
/* --------------------------------------------------------------- */

.task-list-item + .task-list-item,
.viewer-markdown ul ul{margin-top:0.25rem;margin-bottom:0px}

/* compact TOC */
.viewer-markdown .toc ul {
  list-style: none;
  margin-top:0.25rem;
  margin-bottom:0.25rem;
}

/* Code Viewer */
/* --------------------------------------------------------------- */

.viewer-code{overflow-x:auto;border-radius:0.125rem;--tw-bg-opacity:1;background-color:rgb(241 245 249 / var(--tw-bg-opacity));font-family:Fira Mono, monospace;font-size:0.875rem;line-height:1.25rem}

.dark .viewer-code{--tw-bg-opacity:1;background-color:rgb(31 41 55 / var(--tw-bg-opacity))}
.viewer-code .cm-content{padding-top:1rem;padding-bottom:1rem;padding-left:2rem;padding-right:2rem}
@media (min-width: 960px){
  .viewer-notebook .viewer-code .cm-content{padding-top:1rem;padding-bottom:1rem;padding-left:3rem}
}
/* Don’t show focus outline when double-clicking cell in Safari */
.cm-scroller:focus{outline:2px solid transparent;outline-offset:2px}

/* Syntax Highlighting */
/* --------------------------------------------------------------- */

.inspected-value{font-family:Fira Mono, monospace;font-size:0.75rem;line-height:1.25rem}
.cmt-strong, .cmt-heading{font-weight:700}
.cmt-italic, .cmt-emphasis{font-style:italic}
.cmt-strikethrough{-webkit-text-decoration-line:line-through;text-decoration-line:line-through}
.cmt-link{-webkit-text-decoration-line:underline;text-decoration-line:underline}
.untyped-value{white-space:nowrap}

.cm-editor, .cmt-default, .viewer-result{--tw-text-opacity:1;color:rgb(30 41 59 / var(--tw-text-opacity))}

.dark .cm-editor,.dark  .cmt-default,.dark  .viewer-result{--tw-text-opacity:1;color:rgb(203 213 225 / var(--tw-text-opacity))}
.cmt-keyword{--tw-text-opacity:1;color:rgb(107 33 168 / var(--tw-text-opacity))}
.dark .cmt-keyword{--tw-text-opacity:1;color:rgb(244 114 182 / var(--tw-text-opacity))}
.cmt-atom, .cmt-bool, .cmt-url, .cmt-contentSeparator, .cmt-labelName{--tw-text-opacity:1;color:rgb(30 58 138 / var(--tw-text-opacity))}
.dark .cmt-atom,.dark  .cmt-bool,.dark  .cmt-url,.dark  .cmt-contentSeparator,.dark  .cmt-labelName{--tw-text-opacity:1;color:rgb(147 197 253 / var(--tw-text-opacity))}
.cmt-inserted, .cmt-literal{--tw-text-opacity:1;color:rgb(4 120 87 / var(--tw-text-opacity))}
.dark .cmt-inserted,.dark  .cmt-literal{--tw-text-opacity:1;color:rgb(167 243 208 / var(--tw-text-opacity))}
.cmt-string, .cmt-deleted{--tw-text-opacity:1;color:rgb(190 18 60 / var(--tw-text-opacity))}
.dark .cmt-string,.dark  .cmt-deleted{--tw-text-opacity:1;color:rgb(125 211 252 / var(--tw-text-opacity))}
.dark .cmt-italic.cmt-string{--tw-text-opacity:1;color:rgb(186 230 253 / var(--tw-text-opacity))}
.cmt-regexp, .cmt-escape{--tw-text-opacity:1;color:rgb(249 115 22 / var(--tw-text-opacity))}
.dark .cmt-regexp,.dark  .cmt-escape{--tw-text-opacity:1;color:rgb(253 186 116 / var(--tw-text-opacity))}
.cmt-variableName{--tw-text-opacity:1;color:rgb(30 64 175 / var(--tw-text-opacity))}
.dark .cmt-variableName{--tw-text-opacity:1;color:rgb(125 211 252 / var(--tw-text-opacity))}
.cmt-typeName, .cmt-namespace{--tw-text-opacity:1;color:rgb(5 150 105 / var(--tw-text-opacity))}
.dark .cmt-typeName,.dark  .cmt-namespace{--tw-text-opacity:1;color:rgb(110 231 183 / var(--tw-text-opacity))}
.cmt-className{--tw-text-opacity:1;color:rgb(13 148 136 / var(--tw-text-opacity))}
.dark .cmt-className{--tw-text-opacity:1;color:rgb(153 246 228 / var(--tw-text-opacity))}
.cmt-macroName{--tw-text-opacity:1;color:rgb(15 118 110 / var(--tw-text-opacity))}
.dark .cmt-macroName{--tw-text-opacity:1;color:rgb(153 246 228 / var(--tw-text-opacity))}
.cmt-propertyName{--tw-text-opacity:1;color:rgb(29 78 216 / var(--tw-text-opacity))}
.dark .cmt-propertyName{--tw-text-opacity:1;color:rgb(191 219 254 / var(--tw-text-opacity))}
.cmt-comment{--tw-text-opacity:1;color:rgb(100 116 139 / var(--tw-text-opacity))}
.dark .cmt-comment{--tw-text-opacity:1;color:rgb(148 163 184 / var(--tw-text-opacity))}
.cmt-meta{--tw-text-opacity:1;color:rgb(71 85 105 / var(--tw-text-opacity))}
.dark .cmt-meta{--tw-text-opacity:1;color:rgb(148 163 184 / var(--tw-text-opacity))}
.cmt-invalid{--tw-text-opacity:1;color:rgb(239 68 68 / var(--tw-text-opacity))}
.dark .cmt-invalid{--tw-text-opacity:1;color:rgb(252 165 165 / var(--tw-text-opacity))}

.result-data{overflow-x:auto;white-space:nowrap;font-family:Fira Mono, monospace;font-size:0.875rem;line-height:1.25rem;line-height:1.5}
.result-data::-webkit-scrollbar, .path-nav::-webkit-scrollbar{height:0px}
.result-data-collapsed{white-space:nowrap}
.result-data-field{margin-left:1rem;white-space:nowrap}
.result-data-field-link{margin-left:1rem;cursor:pointer;white-space:nowrap}
.result-data-field-link:hover{background-color:rgb(0 0 0 / 0.05);--tw-text-opacity:1;color:rgb(0 0 0 / var(--tw-text-opacity))}
.result-text-empty {
  color: rgba(0,0,0,.3);
}
.browsify-button:hover {
  box-shadow: -2px 0 0 2px #edf2f7;
}

/* Prose */
/* --------------------------------------------------------------- */

.viewer-notebook,
.viewer-markdown{color:var(--tw-prose-body);max-width:65ch;}

.viewer-notebook :where([class~="lead"]):not(:where([class~="not-prose"] *)),
.viewer-markdown :where([class~="lead"]):not(:where([class~="not-prose"] *)){color:var(--tw-prose-lead);font-size:1.25em;line-height:1.6;margin-top:1.2em;margin-bottom:1.2em}

.viewer-notebook :where(a):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(a):not(:where([class~="not-prose"] *)){color:var(--tw-prose-links);text-decoration:underline;font-weight:500}

.viewer-notebook :where(strong):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(strong):not(:where([class~="not-prose"] *)){color:var(--tw-prose-bold);font-weight:600}

.viewer-notebook :where(a strong):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(a strong):not(:where([class~="not-prose"] *)){color:inherit}

.viewer-notebook :where(blockquote strong):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(blockquote strong):not(:where([class~="not-prose"] *)){color:inherit}

.viewer-notebook :where(thead th strong):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(thead th strong):not(:where([class~="not-prose"] *)){color:inherit}

.viewer-notebook :where(ol):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(ol):not(:where([class~="not-prose"] *)){list-style-type:decimal;margin-top:1.25em;margin-bottom:1.25em;padding-left:1.625em}

.viewer-notebook :where(ol[type="A"]):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(ol[type="A"]):not(:where([class~="not-prose"] *)){list-style-type:upper-alpha}

.viewer-notebook :where(ol[type="a"]):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(ol[type="a"]):not(:where([class~="not-prose"] *)){list-style-type:lower-alpha}

.viewer-notebook :where(ol[type="A" s]):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(ol[type="A" s]):not(:where([class~="not-prose"] *)){list-style-type:upper-alpha}

.viewer-notebook :where(ol[type="a" s]):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(ol[type="a" s]):not(:where([class~="not-prose"] *)){list-style-type:lower-alpha}

.viewer-notebook :where(ol[type="I"]):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(ol[type="I"]):not(:where([class~="not-prose"] *)){list-style-type:upper-roman}

.viewer-notebook :where(ol[type="i"]):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(ol[type="i"]):not(:where([class~="not-prose"] *)){list-style-type:lower-roman}

.viewer-notebook :where(ol[type="I" s]):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(ol[type="I" s]):not(:where([class~="not-prose"] *)){list-style-type:upper-roman}

.viewer-notebook :where(ol[type="i" s]):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(ol[type="i" s]):not(:where([class~="not-prose"] *)){list-style-type:lower-roman}

.viewer-notebook :where(ol[type="1"]):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(ol[type="1"]):not(:where([class~="not-prose"] *)){list-style-type:decimal}

.viewer-notebook :where(ul):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(ul):not(:where([class~="not-prose"] *)){list-style-type:disc;margin-top:1.25em;margin-bottom:1.25em;padding-left:1.625em}

.viewer-notebook :where(ol > li):not(:where([class~="not-prose"] *))::marker,
.viewer-markdown :where(ol > li):not(:where([class~="not-prose"] *))::marker{font-weight:400;color:var(--tw-prose-counters)}

.viewer-notebook :where(ul > li):not(:where([class~="not-prose"] *))::marker,
.viewer-markdown :where(ul > li):not(:where([class~="not-prose"] *))::marker{color:var(--tw-prose-bullets)}

.viewer-notebook :where(hr):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(hr):not(:where([class~="not-prose"] *)){border-color:var(--tw-prose-hr);border-top-width:1px;margin-top:3em;margin-bottom:3em}

.viewer-notebook :where(blockquote):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(blockquote):not(:where([class~="not-prose"] *)){font-weight:500;font-style:italic;color:var(--tw-prose-quotes);border-left-width:0.25rem;border-left-color:var(--tw-prose-quote-borders);quotes:"\201C""\201D""\2018""\2019";margin-top:1.6em;margin-bottom:1.6em;padding-left:1em}

.viewer-notebook :where(blockquote p:first-of-type):not(:where([class~="not-prose"] *))::before,
.viewer-markdown :where(blockquote p:first-of-type):not(:where([class~="not-prose"] *))::before{content:open-quote}

.viewer-notebook :where(blockquote p:last-of-type):not(:where([class~="not-prose"] *))::after,
.viewer-markdown :where(blockquote p:last-of-type):not(:where([class~="not-prose"] *))::after{content:close-quote}

.viewer-notebook :where(h1):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(h1):not(:where([class~="not-prose"] *)){color:var(--tw-prose-headings);font-weight:800;font-size:2.25em;margin-top:0;margin-bottom:0.8888889em;line-height:1.1111111}

.viewer-notebook :where(h1 strong):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(h1 strong):not(:where([class~="not-prose"] *)){font-weight:900;color:inherit}

.viewer-notebook :where(h2):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(h2):not(:where([class~="not-prose"] *)){color:var(--tw-prose-headings);font-weight:700;font-size:1.5em;margin-top:2em;margin-bottom:1em;line-height:1.3333333}

.viewer-notebook :where(h2 strong):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(h2 strong):not(:where([class~="not-prose"] *)){font-weight:800;color:inherit}

.viewer-notebook :where(h3):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(h3):not(:where([class~="not-prose"] *)){color:var(--tw-prose-headings);font-weight:600;font-size:1.25em;margin-top:1.6em;margin-bottom:0.6em;line-height:1.6}

.viewer-notebook :where(h3 strong):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(h3 strong):not(:where([class~="not-prose"] *)){font-weight:700;color:inherit}

.viewer-notebook :where(h4):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(h4):not(:where([class~="not-prose"] *)){color:var(--tw-prose-headings);font-weight:600;margin-top:1.5em;margin-bottom:0.5em;line-height:1.5}

.viewer-notebook :where(h4 strong):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(h4 strong):not(:where([class~="not-prose"] *)){font-weight:700;color:inherit}

.viewer-notebook :where(img):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(img):not(:where([class~="not-prose"] *)){margin-top:2em;margin-bottom:2em}

.viewer-notebook :where(figure > *):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(figure > *):not(:where([class~="not-prose"] *)){margin-top:0;margin-bottom:0}

.viewer-notebook :where(figcaption):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(figcaption):not(:where([class~="not-prose"] *)){color:var(--tw-prose-captions);font-size:0.875em;line-height:1.4285714;margin-top:0.8571429em}

.viewer-notebook :where(code):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(code):not(:where([class~="not-prose"] *)){color:var(--tw-prose-code);font-weight:600;font-size:0.875em}

.viewer-notebook :where(code):not(:where([class~="not-prose"] *))::before,
.viewer-markdown :where(code):not(:where([class~="not-prose"] *))::before{content:"`"}

.viewer-notebook :where(code):not(:where([class~="not-prose"] *))::after,
.viewer-markdown :where(code):not(:where([class~="not-prose"] *))::after{content:"`"}

.viewer-notebook :where(a code):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(a code):not(:where([class~="not-prose"] *)){color:inherit}

.viewer-notebook :where(h1 code):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(h1 code):not(:where([class~="not-prose"] *)){color:inherit}

.viewer-notebook :where(h2 code):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(h2 code):not(:where([class~="not-prose"] *)){color:inherit;font-size:0.875em}

.viewer-notebook :where(h3 code):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(h3 code):not(:where([class~="not-prose"] *)){color:inherit;font-size:0.9em}

.viewer-notebook :where(h4 code):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(h4 code):not(:where([class~="not-prose"] *)){color:inherit}

.viewer-notebook :where(blockquote code):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(blockquote code):not(:where([class~="not-prose"] *)){color:inherit}

.viewer-notebook :where(thead th code):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(thead th code):not(:where([class~="not-prose"] *)){color:inherit}

.viewer-notebook :where(pre):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(pre):not(:where([class~="not-prose"] *)){color:var(--tw-prose-pre-code);background-color:var(--tw-prose-pre-bg);overflow-x:auto;font-weight:400;font-size:0.875em;line-height:1.7142857;margin-top:1.7142857em;margin-bottom:1.7142857em;border-radius:0.375rem;padding-top:0.8571429em;padding-right:1.1428571em;padding-bottom:0.8571429em;padding-left:1.1428571em}

.viewer-notebook :where(pre code):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(pre code):not(:where([class~="not-prose"] *)){background-color:transparent;border-width:0;border-radius:0;padding:0;font-weight:inherit;color:inherit;font-size:inherit;font-family:inherit;line-height:inherit}

.viewer-notebook :where(pre code):not(:where([class~="not-prose"] *))::before,
.viewer-markdown :where(pre code):not(:where([class~="not-prose"] *))::before{content:none}

.viewer-notebook :where(pre code):not(:where([class~="not-prose"] *))::after,
.viewer-markdown :where(pre code):not(:where([class~="not-prose"] *))::after{content:none}

.viewer-notebook :where(table):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(table):not(:where([class~="not-prose"] *)){width:100%;table-layout:auto;text-align:left;margin-top:2em;margin-bottom:2em;font-size:0.875em;line-height:1.7142857}

.viewer-notebook :where(thead):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(thead):not(:where([class~="not-prose"] *)){border-bottom-width:1px;border-bottom-color:var(--tw-prose-th-borders)}

.viewer-notebook :where(thead th):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(thead th):not(:where([class~="not-prose"] *)){color:var(--tw-prose-headings);font-weight:600;vertical-align:bottom;padding-right:0.5714286em;padding-bottom:0.5714286em;padding-left:0.5714286em}

.viewer-notebook :where(tbody tr):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(tbody tr):not(:where([class~="not-prose"] *)){border-bottom-width:1px;border-bottom-color:var(--tw-prose-td-borders)}

.viewer-notebook :where(tbody tr:last-child):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(tbody tr:last-child):not(:where([class~="not-prose"] *)){border-bottom-width:0}

.viewer-notebook :where(tbody td):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(tbody td):not(:where([class~="not-prose"] *)){vertical-align:baseline}

.viewer-notebook :where(tfoot):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(tfoot):not(:where([class~="not-prose"] *)){border-top-width:1px;border-top-color:var(--tw-prose-th-borders)}

.viewer-notebook :where(tfoot td):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(tfoot td):not(:where([class~="not-prose"] *)){vertical-align:top}

.viewer-notebook,
.viewer-markdown{--tw-prose-body:#374151;--tw-prose-headings:#111827;--tw-prose-lead:#4b5563;--tw-prose-links:#111827;--tw-prose-bold:#111827;--tw-prose-counters:#6b7280;--tw-prose-bullets:#d1d5db;--tw-prose-hr:#e5e7eb;--tw-prose-quotes:#111827;--tw-prose-quote-borders:#e5e7eb;--tw-prose-captions:#6b7280;--tw-prose-code:#111827;--tw-prose-pre-code:#e5e7eb;--tw-prose-pre-bg:#1f2937;--tw-prose-th-borders:#d1d5db;--tw-prose-td-borders:#e5e7eb;--tw-prose-invert-body:#d1d5db;--tw-prose-invert-headings:#fff;--tw-prose-invert-lead:#9ca3af;--tw-prose-invert-links:#fff;--tw-prose-invert-bold:#fff;--tw-prose-invert-counters:#9ca3af;--tw-prose-invert-bullets:#4b5563;--tw-prose-invert-hr:#374151;--tw-prose-invert-quotes:#f3f4f6;--tw-prose-invert-quote-borders:#374151;--tw-prose-invert-captions:#9ca3af;--tw-prose-invert-code:#fff;--tw-prose-invert-pre-code:#d1d5db;--tw-prose-invert-pre-bg:rgb(0 0 0 / 50%);--tw-prose-invert-th-borders:#4b5563;--tw-prose-invert-td-borders:#374151;font-size:1rem;line-height:1.75}

.viewer-notebook :where(p):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(p):not(:where([class~="not-prose"] *)){margin-top:1.25em;margin-bottom:1.25em}

.viewer-notebook :where(video):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(video):not(:where([class~="not-prose"] *)){margin-top:2em;margin-bottom:2em}

.viewer-notebook :where(figure):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(figure):not(:where([class~="not-prose"] *)){margin-top:2em;margin-bottom:2em}

.viewer-notebook :where(li):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(li):not(:where([class~="not-prose"] *)){margin-top:0.5em;margin-bottom:0.5em}

.viewer-notebook :where(ol > li):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(ol > li):not(:where([class~="not-prose"] *)){padding-left:0.375em}

.viewer-notebook :where(ul > li):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(ul > li):not(:where([class~="not-prose"] *)){padding-left:0.375em}

.viewer-notebook :where(.prose > ul > li p):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(.prose > ul > li p):not(:where([class~="not-prose"] *)){margin-top:0.75em;margin-bottom:0.75em}

.viewer-notebook :where(.prose > ul > li > *:first-child):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(.prose > ul > li > *:first-child):not(:where([class~="not-prose"] *)){margin-top:1.25em}

.viewer-notebook :where(.prose > ul > li > *:last-child):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(.prose > ul > li > *:last-child):not(:where([class~="not-prose"] *)){margin-bottom:1.25em}

.viewer-notebook :where(.prose > ol > li > *:first-child):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(.prose > ol > li > *:first-child):not(:where([class~="not-prose"] *)){margin-top:1.25em}

.viewer-notebook :where(.prose > ol > li > *:last-child):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(.prose > ol > li > *:last-child):not(:where([class~="not-prose"] *)){margin-bottom:1.25em}

.viewer-notebook :where(ul ul, ul ol, ol ul, ol ol):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(ul ul, ul ol, ol ul, ol ol):not(:where([class~="not-prose"] *)){margin-top:0.75em;margin-bottom:0.75em}

.viewer-notebook :where(hr + *):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(hr + *):not(:where([class~="not-prose"] *)){margin-top:0}

.viewer-notebook :where(h2 + *):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(h2 + *):not(:where([class~="not-prose"] *)){margin-top:0}

.viewer-notebook :where(h3 + *):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(h3 + *):not(:where([class~="not-prose"] *)){margin-top:0}

.viewer-notebook :where(h4 + *):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(h4 + *):not(:where([class~="not-prose"] *)){margin-top:0}

.viewer-notebook :where(thead th:first-child):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(thead th:first-child):not(:where([class~="not-prose"] *)){padding-left:0}

.viewer-notebook :where(thead th:last-child):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(thead th:last-child):not(:where([class~="not-prose"] *)){padding-right:0}

.viewer-notebook :where(tbody td, tfoot td):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(tbody td, tfoot td):not(:where([class~="not-prose"] *)){padding-top:0.5714286em;padding-right:0.5714286em;padding-bottom:0.5714286em;padding-left:0.5714286em}

.viewer-notebook :where(tbody td:first-child, tfoot td:first-child):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(tbody td:first-child, tfoot td:first-child):not(:where([class~="not-prose"] *)){padding-left:0}

.viewer-notebook :where(tbody td:last-child, tfoot td:last-child):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(tbody td:last-child, tfoot td:last-child):not(:where([class~="not-prose"] *)){padding-right:0}

.viewer-notebook :where(.prose > :first-child):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(.prose > :first-child):not(:where([class~="not-prose"] *)){margin-top:0}

.viewer-notebook :where(.prose > :last-child):not(:where([class~="not-prose"] *)),
.viewer-markdown :where(.prose > :last-child):not(:where([class~="not-prose"] *)){margin-bottom:0}

.viewer-notebook,
.viewer-markdown{max-width:none}

.viewer-notebook :is(:where(h1, h2, h3, h4, h5, h6, th):not(:where([class~="not-prose"] *))),
.viewer-markdown :is(:where(h1, h2, h3, h4, h5, h6, th):not(:where([class~="not-prose"] *))){margin-bottom:1rem}

.viewer-notebook :is(:where(p):not(:where([class~="not-prose"] *))),
.viewer-markdown :is(:where(p):not(:where([class~="not-prose"] *))){margin-top:1rem;line-height:1.375}

.viewer-notebook :is(:where(a):not(:where([class~="not-prose"] *))),
.viewer-markdown :is(:where(a):not(:where([class~="not-prose"] *))){--tw-text-opacity:1;color:rgb(37 99 235 / var(--tw-text-opacity));-webkit-text-decoration-line:none;text-decoration-line:none}

.viewer-notebook :is(:where(a):not(:where([class~="not-prose"] *))):hover,
.viewer-markdown :is(:where(a):not(:where([class~="not-prose"] *))):hover{-webkit-text-decoration-line:underline;text-decoration-line:underline}

.viewer-notebook :is(:where(blockquote):not(:where([class~="not-prose"] *))),
.viewer-markdown :is(:where(blockquote):not(:where([class~="not-prose"] *))){margin-top:1rem;line-height:1.375}

.viewer-notebook :is(:where(figure):not(:where([class~="not-prose"] *))),
.viewer-markdown :is(:where(figure):not(:where([class~="not-prose"] *))){margin-top:1rem}

.viewer-notebook :is(:where(figcaption):not(:where([class~="not-prose"] *))),
.viewer-markdown :is(:where(figcaption):not(:where([class~="not-prose"] *))){margin-top:0.5rem;font-size:0.75rem;line-height:1rem}

.viewer-notebook :is(:where(code):not(:where([class~="not-prose"] *))),
.viewer-markdown :is(:where(code):not(:where([class~="not-prose"] *))){--tw-bg-opacity:1;background-color:rgb(241 245 249 / var(--tw-bg-opacity));font-weight:500}

.viewer-notebook :is(:where(ol):not(:where([class~="not-prose"] *))),
.viewer-markdown :is(:where(ol):not(:where([class~="not-prose"] *))){margin-top:1rem;margin-bottom:1.5rem;line-height:1.375}

.viewer-notebook :is(:where(ul):not(:where([class~="not-prose"] *))),
.viewer-markdown :is(:where(ul):not(:where([class~="not-prose"] *))){margin-top:1rem;margin-bottom:1.5rem;line-height:1.375}

.viewer-notebook :is(:where(table):not(:where([class~="not-prose"] *))),
.viewer-markdown :is(:where(table):not(:where([class~="not-prose"] *))){margin-top:0px}

.viewer-notebook :is(:where(th):not(:where([class~="not-prose"] *))),
.viewer-markdown :is(:where(th):not(:where([class~="not-prose"] *))){margin-bottom:0px}

.viewer-notebook :is(:where(img):not(:where([class~="not-prose"] *))),
.viewer-markdown :is(:where(img):not(:where([class~="not-prose"] *))){margin-top:0px;margin-bottom:0px}

.viewer-notebook :is(:where(hr):not(:where([class~="not-prose"] *))),
.viewer-markdown :is(:where(hr):not(:where([class~="not-prose"] *))){margin-top:1.5rem;border-top-width:2px;border-style:solid;--tw-border-opacity:1;border-color:rgb(226 232 240 / var(--tw-border-opacity))}

.dark .viewer-notebook,.dark 
.viewer-markdown{--tw-prose-body:var(--tw-prose-invert-body);--tw-prose-headings:var(--tw-prose-invert-headings);--tw-prose-lead:var(--tw-prose-invert-lead);--tw-prose-links:var(--tw-prose-invert-links);--tw-prose-bold:var(--tw-prose-invert-bold);--tw-prose-counters:var(--tw-prose-invert-counters);--tw-prose-bullets:var(--tw-prose-invert-bullets);--tw-prose-hr:var(--tw-prose-invert-hr);--tw-prose-quotes:var(--tw-prose-invert-quotes);--tw-prose-quote-borders:var(--tw-prose-invert-quote-borders);--tw-prose-captions:var(--tw-prose-invert-captions);--tw-prose-code:var(--tw-prose-invert-code);--tw-prose-pre-code:var(--tw-prose-invert-pre-code);--tw-prose-pre-bg:var(--tw-prose-invert-pre-bg);--tw-prose-th-borders:var(--tw-prose-invert-th-borders);--tw-prose-td-borders:var(--tw-prose-invert-td-borders)}

.dark .viewer-notebook :is(:where(a):not(:where([class~="not-prose"] *))),.dark 
.viewer-markdown :is(:where(a):not(:where([class~="not-prose"] *))){--tw-text-opacity:1;color:rgb(147 197 253 / var(--tw-text-opacity))}
.viewer-markdown blockquote p:first-of-type:before,
.viewer-markdown blockquote p:last-of-type:after{--tw-content:none;content:var(--tw-content)}

/* Images */
/* --------------------------------------------------------------- */


/* Todo Lists */
/* --------------------------------------------------------------- */

.contains-task-list{list-style-type:none;padding-left:1.5rem}
.contains-task-list input[type="checkbox"]{position:relative;top:0.15rem;margin-right:0.3rem;margin-left:-1.5rem;height:1rem;width:1rem;-webkit-appearance:none;appearance:none;border-radius:0.25rem;border-width:1px;--tw-border-opacity:1;border-color:rgb(226 232 240 / var(--tw-border-opacity))}
.contains-task-list input[type="checkbox"]:checked{--tw-border-opacity:1;border-color:rgb(79 70 229 / var(--tw-border-opacity));--tw-bg-opacity:1;background-color:rgb(79 70 229 / var(--tw-bg-opacity));background-size:contain;background-repeat:no-repeat;
  background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3e%3c/svg%3e")}

/* Markdown TOC */
/* --------------------------------------------------------------- */

.viewer-markdown .toc{margin-top:1rem}
.viewer-markdown h1 + .toc{margin-top:2rem}

.viewer-markdown .toc h1,
.viewer-markdown .toc h2,
.viewer-markdown .toc h3,
.viewer-markdown .toc h4,
.viewer-markdown .toc h5,
.viewer-markdown .toc h6{margin-top:0px;margin-bottom:0px;font-family:Fira Sans, -apple-system, BlinkMacSystemFont, sans-serif;font-size:1rem;line-height:1.5rem;--tw-text-opacity:1;color:rgb(79 70 229 / var(--tw-text-opacity))}
.viewer-markdown .toc a{font-weight:400;--tw-text-opacity:1;color:rgb(79 70 229 / var(--tw-text-opacity));-webkit-text-decoration-line:none;text-decoration-line:none}
.viewer-markdown .toc a:hover{-webkit-text-decoration-line:underline;text-decoration-line:underline}
.viewer-markdown .toc li{margin:0px}
.viewer-markdown .toc ul ul{padding-left:1rem}

/* Notebook Spacing */
/* --------------------------------------------------------------- */

.viewer-notebook{padding-top:4rem;padding-bottom:4rem}
#clerk-static-app .viewer-notebook{padding-top:0.8rem;padding-bottom:4rem}
.viewer-markdown *:first-child:not(.viewer-code):not(li):not(h2){margin-top:0px}
/*.viewer + .viewer { @apply mt-6; }*/
.viewer + .viewer-result{margin-top:0px}
.viewer-code + .viewer-result{margin-top:0.75rem}
.viewer-markdown + .viewer-markdown{margin-top:0px}

/* Sidenotes */
/* --------------------------------------------------------------- */

.sidenote-ref{top:-3px;margin:0px;margin-left:4px;display:inline-flex;height:18px;width:18px;cursor:pointer;align-items:center;justify-content:center;border-radius:9999px;border-width:1px;--tw-border-opacity:1;border-color:rgb(203 213 225 / var(--tw-border-opacity));--tw-bg-opacity:1;background-color:rgb(241 245 249 / var(--tw-bg-opacity))}

.sidenote-ref:hover{--tw-border-opacity:1;border-color:rgb(203 213 225 / var(--tw-border-opacity));--tw-bg-opacity:1;background-color:rgb(226 232 240 / var(--tw-bg-opacity))}
.sidenote{position:relative;float:left;clear:both;margin-left:2.5%;margin-right:2.5%;margin-top:1rem;margin-bottom:1rem;display:none;width:95%;font-size:0.75rem;line-height:1rem}
.sidenote-ref.expanded + .sidenote{display:block}
@media (min-width: 860px) {
  .sidenote-ref{pointer-events:none;top:-0.5em;margin:0px;display:inline;height:auto;width:auto;border-width:0px;background-color:transparent}
  .sidenote sup{display:inline}
  .viewer-markdown .contains-sidenotes p{max-width:65%}
  .viewer-markdown p .sidenote{position:relative;float:right;clear:right;margin-right:-54%;margin-top:0.2rem;display:block;width:50%}
}
.viewer-code + .viewer:not(.viewer-markdown):not(.viewer-code):not(.viewer-code-folded),
.viewer-code-folded + .viewer:not(.viewer-markdown):not(.viewer-code):not(.viewer-code-folded),
.viewer-result + .viewer-result{margin-top:0.5rem}
.viewer-code + .viewer-code-folded{margin-top:1rem}
.viewer-result{margin-bottom:1.5rem;line-height:1.25}
.viewer-result figure{margin-top:0px !important}
@media (min-width: 768px) {
  .devcard-desc > div{margin:0px;max-width:100%}
}

/* Command Palette */
/* --------------------------------------------------------------- */

.nj-commands-input{background-color:transparent;--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity))}
.nj-context-menu-item:hover:not([disabled]){cursor:pointer;
  background-color: rgba(255,255,255,.14)}

/* Devdocs */
/* --------------------------------------------------------------- */

.logo, .logo-white{display:block;text-indent:-999em;
  background: url(/images/nextjournal-logo.svg) center center no-repeat}
.devdocs-body     { font-family: "Inter", sans-serif; }

/* Workarounds */
/* --------------------------------------------------------------- */

/* Fixes vega viewer resizing into infinity */
.vega-embed .chart-wrapper{height:auto !important}
/* fixes fraction separators being overridden by tw’s border-color */
.katex *{--tw-border-opacity:1;border-color:rgb(0 0 0 / var(--tw-border-opacity))}
.hover\:text-slate-600:hover{--tw-text-opacity:1;color:rgb(71 85 105 / var(--tw-text-opacity))}
.dark .dark\:bg-gray-900{--tw-bg-opacity:1;background-color:rgb(17 24 39 / var(--tw-bg-opacity))}
.dark .dark\:hover\:text-white:hover{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity))}
@media (min-width: 768px){.md\:left-auto{left:auto}.md\:right-2{right:0.5rem}.md\:h-4{height:1rem}.md\:w-4{width:1rem}}
</style><title>Calva + nREPL</title></head><body class="dark:bg-gray-900"><div id="clerk"><div class="flex"><div class="fixed top-2 left-2 md:left-auto md:right-2 z-10"><div class="relative dark-mode-toggle"><button class="text-slate-400 hover:text-slate-600 dark:hover:text-white cursor-pointer"><svg class="w-5 h-5 md:w-4 md:h-4" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="11.9998" cy="11.9998" r="5.75375" fill="currentColor" transform-origin="11.999799728393555px 11.999799728393555px" style="transform: none; transform-origin: 11.9998px 11.9998px;"></circle><svg transform-origin="11.999960899353027px 11.999765396118164px" style="transform: none; transform-origin: 12px 11.9998px;"><circle cx="3.08982" cy="6.85502" r="1.71143" transform="rotate(-60 3.08982 6.85502)" fill="currentColor"></circle><circle cx="3.0903" cy="17.1436" r="1.71143" transform="rotate(-120 3.0903 17.1436)" fill="currentColor"></circle><circle cx="12" cy="22.2881" r="1.71143" fill="currentColor"></circle><circle cx="20.9101" cy="17.1436" r="1.71143" transform="rotate(-60 20.9101 17.1436)" fill="currentColor"></circle><circle cx="20.9101" cy="6.8555" r="1.71143" transform="rotate(-120 20.9101 6.8555)" fill="currentColor"></circle><circle cx="12" cy="1.71143" r="1.71143" fill="currentColor"></circle></svg></svg></button></div></div><div class="flex-auto h-screen overflow-y-auto scroll-container"><div class="flex flex-col items-center viewer-notebook flex-auto"><div class="viewer viewer-html- w-full max-w-prose px-8"><div class="viewer-markdown"><h1 id="calva_+_nrepl"><span>Calva + nREPL</span></h1><p><a href="https://nrepl.org/"><span>nREPL</span></a><span> stands for network REPL, it's a way of connecting</span><span> </span><span>to a running Clojure program remotely. You can connect from a command line</span><span> </span><span>REPL client or from any client that implements the nREPL protocol. Calva is</span><span> </span><span>one of those clients.</span></p><p><span>Here's how my workflow looks like. I have some global aliases defined at</span><span> </span><code><span>~/.clojure/deps.edn</span></code><span>, one of them is this:</span></p></div></div><div class="viewer viewer-code w-full max-w-wide"><div class="cm-editor"><cm-scroller><div class="cm-content whitespace-pre"><div class="cm-line" style="padding: 0px; line-height: 1.6; font-size: 15px; font-family: &quot;Fira Mono&quot;, monospace;">'{<span class="cmt-atom">:aliases</span> {<span class="cmt-atom">:cider-nrepl</span> {<span class="cmt-atom">:extra-deps</span> {nrepl/nrepl {<span class="cmt-atom">:mvn/version</span> <span class="cmt-string">"</span><span class="cmt-string">1.0.0</span><span class="cmt-string">"</span>}</div><div class="cm-line" style="padding: 0px; line-height: 1.6; font-size: 15px; font-family: &quot;Fira Mono&quot;, monospace;">                                       cider/cider-nrepl {<span class="cmt-atom">:mvn/version</span> <span class="cmt-string">"</span><span class="cmt-string">0.29.0</span><span class="cmt-string">"</span>}}</div><div class="cm-line" style="padding: 0px; line-height: 1.6; font-size: 15px; font-family: &quot;Fira Mono&quot;, monospace;">                          <span class="cmt-atom">:main-opts</span> [<span class="cmt-string">"</span><span class="cmt-string">-m</span><span class="cmt-string">"</span></div><div class="cm-line" style="padding: 0px; line-height: 1.6; font-size: 15px; font-family: &quot;Fira Mono&quot;, monospace;">                                      <span class="cmt-string">"</span><span class="cmt-string">nrepl.cmdline</span><span class="cmt-string">"</span></div><div class="cm-line" style="padding: 0px; line-height: 1.6; font-size: 15px; font-family: &quot;Fira Mono&quot;, monospace;">                                      <span class="cmt-string">"</span><span class="cmt-string">--middleware</span><span class="cmt-string">"</span></div><div class="cm-line" style="padding: 0px; line-height: 1.6; font-size: 15px; font-family: &quot;Fira Mono&quot;, monospace;">                                      <span class="cmt-string">"</span><span class="cmt-string">[cider.nrepl.middleware/cider-middleware]</span><span class="cmt-string">"</span>]}}}</div></div></cm-scroller></div></div><div class="viewer viewer-html- w-full max-w-prose px-8"><div class="viewer-markdown"><p><span>It adds dependencies to nREPL and Cider, and also defines main options for</span><span> </span><span>running the nREPL server from the command line. </span><a href="https://docs.cider.mx/cider-nrepl/index.html"><span>Cider</span></a><span> </span><span>is like an extension for nREPL that adds capabilities like code completion,</span><span> </span><span>debugging, etc, often needed by programming environments, and Calva uses Cider</span><span> </span><span>for such things.</span></p><p><span>Now from the </span><code><span>api/beacon</span></code><span> directory you can run this command:</span></p><div class="viewer-code"><div class="cm-editor"><cm-scroller><div class="cm-content whitespace-pre"><div class="cm-line" style="padding: 0px; line-height: 1.6; font-size: 15px; font-family: &quot;Fira Mono&quot;, monospace;">clojure -M:test:dev:cider-nrepl</div><div class="cm-line" style="padding: 0px; line-height: 1.6; font-size: 15px; font-family: &quot;Fira Mono&quot;, monospace;">
</div></div></cm-scroller></div></div><p><span>The </span><code><span>-M</span></code><span> options basically tells Clojure "add these aliases and run the main</span><span> </span><span>function specified by the last alias". The </span><code><span>test</span></code><span> and </span><code><span>dev</span></code><span> aliases are defined</span><span> </span><span>in the </span><code><span>deps.edn</span></code><span> file found in the </span><code><span>beacon</span></code><span> directory, while the </span><code><span>cider-nrepl</span></code><span> </span><span>alias is defined in the global </span><code><span>deps.edn</span></code><span> at </span><code><span>~/.clojure</span></code><span>. We specified the</span><span> </span><span>main function in the </span><code><span>cider-nrepl</span></code><span> alias by adding </span><code><span>-m nrepl.cmdline</span></code><span> in </span><code><span>:main-opts</span></code><span>.</span><span> </span><span>That </span><code><span>nrepl.cmdline</span></code><span> function is provided by the </span><code><span>nrepl/nrepl</span></code><span> dependency.</span><span> </span><span>Also notice that we're passing the Cider middleware as an nREPL command line parameter.</span></p><p><span>Once you run the command above it should print out the port where nREPL is</span><span> </span><span>available, which is a random port, e.g.</span></p><div class="viewer-code"><div class="cm-editor"><cm-scroller><div class="cm-content whitespace-pre"><div class="cm-line" style="padding: 0px; line-height: 1.6; font-size: 15px; font-family: &quot;Fira Mono&quot;, monospace;">nREPL server started on port <span class="cmt-literal">39209</span> on host localhost - nrepl://localhost:39209</div><div class="cm-line" style="padding: 0px; line-height: 1.6; font-size: 15px; font-family: &quot;Fira Mono&quot;, monospace;">
</div></div></cm-scroller></div></div><p><span>To connect Calva to the running nREPL, type </span><code><span>ctrl+alt+c</span></code><span> + </span><code><span>ctrl+alt+c</span></code><span>. A</span><span> </span><span>file named </span><code><span>output.calva-repl</span></code><span> should automatically open. When you evaluate</span><span> </span><span>Clojure expressions, the results are printed out in that file.</span></p><h2 id="starting_the_beacon_api"><span>Starting The Beacon API</span></h2><p><span>Open the </span><code><span>beacon/development/src/user.clj</span></code><span> file and look for the </span><code><span>(go :v1)</span></code><span> </span><span>expression that is located in a </span><code><span>comment</span></code><span> expression. Place the cursor</span><span> </span><span>either somewhere inside the </span><code><span>(go :v1)</span></code><span> expression or at its beggining, and</span><span> </span><span>then type </span><code><span>alt+enter</span></code><span> to evaluate the expression at the cursor. That's the</span><span> </span><span>keybinding on Linux, but if it doesn't work on Windows type </span><code><span>ctrl+shift+p</span></code><span> to</span><span> </span><span>open the vscode command list and then type "calva eval current form" to</span><span> </span><span>search for the command. The keybinding should be displayed in the results.</span></p><h2 id="running_tests"><span>Running Tests</span></h2><p><span>Open any test file, type </span><code><span>ctrl+shift+p</span></code><span> and then type "calva run test". It</span><span> </span><span>shows all the Calva commands available for running tests. The test results</span><span> </span><span>are printed in the </span><code><span>output.calva-repl</span></code><span> file.</span></p></div></div></div></div></div></div><script type="module">let viewer = nextjournal.clerk.sci_env
let state = "{:doc {:path [], :nextjournal/value {:toc {:type :toc, :children [{:type :toc, :content [{:type :text, :text \"Calva + nREPL\"}], :heading-level 1, :children [{:type :toc, :content [{:type :text, :text \"Starting The Beacon API\"}], :heading-level 2} {:type :toc, :content [{:type :text, :text \"Running Tests\"}], :heading-level 2}]}]}, :toc-visibility false, :atom-var-name->state #viewer-eval (nextjournal.clerk.render/intern-atoms! {}), :auto-expand-results? nil, :scope {:namespace :notebooks.repl}, :open-graph {:type \"article:clerk\", :title \"Calva + nREPL\", :description \"nREPL stands for network REPL, it's a way of connectingto a running Clojure program remotely. You can connect from a command lineREPL client or from any client that implements the nREPL protocol. Calva isone of those clients.\"}, :title \"Calva + nREPL\", :blocks [{:nextjournal/value [:div.viewer-markdown [\"h1\" {:id \"calva_+_nrepl\"} [:span \"Calva + nREPL\"]] [:p [:a {:href \"https://nrepl.org/\"} [:span \"nREPL\"]] [:span \" stands for network REPL, it's a way of connecting\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"to a running Clojure program remotely. You can connect from a command line\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"REPL client or from any client that implements the nREPL protocol. Calva is\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"one of those clients.\"]] [:p [:span \"Here's how my workflow looks like. I have some global aliases defined at\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:code [:span \"~/.clojure/deps.edn\"]] [:span \", one of them is this:\"]]], :nextjournal/viewer {:name :html-, :render-fn #viewer-fn identity, :hash \"5dsKyVZX2dPvsyoeg6dNrfeuqAh5UK\"}} {:nextjournal/value \"'{:aliases {:cider-nrepl {:extra-deps {nrepl/nrepl {:mvn/version \\\"1.0.0\\\"}\\n                                       cider/cider-nrepl {:mvn/version \\\"0.29.0\\\"}}\\n                          :main-opts [\\\"-m\\\"\\n                                      \\\"nrepl.cmdline\\\"\\n                                      \\\"--middleware\\\"\\n                                      \\\"[cider.nrepl.middleware/cider-middleware]\\\"]}}}\", :nextjournal/opts {:loc {:line 16, :column 1}}, :nextjournal/viewer {:name :code, :render-fn #viewer-fn nextjournal.clerk.render/render-code, :hash \"5duGVW4Xoi1QoW73J5wMRghqm9uVoW\"}} {:nextjournal/value [:div.viewer-markdown [:p [:span \"It adds dependencies to nREPL and Cider, and also defines main options for\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"running the nREPL server from the command line. \"] [:a {:href \"https://docs.cider.mx/cider-nrepl/index.html\"} [:span \"Cider\"]] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"is like an extension for nREPL that adds capabilities like code completion,\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"debugging, etc, often needed by programming environments, and Calva uses Cider\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"for such things.\"]] [:p [:span \"Now from the \"] [:code [:span \"api/beacon\"]] [:span \" directory you can run this command:\"]] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:div.viewer-code [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"clojure -M:test:dev:cider-nrepl\\n\", :nextjournal/viewer {:name :code, :render-fn #viewer-fn nextjournal.clerk.render/render-code, :hash \"5duGVW4Xoi1QoW73J5wMRghqm9uVoW\"}}]], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:p [:span \"The \"] [:code [:span \"-M\"]] [:span \" options basically tells Clojure \\\"add these aliases and run the main\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"function specified by the last alias\\\". The \"] [:code [:span \"test\"]] [:span \" and \"] [:code [:span \"dev\"]] [:span \" aliases are defined\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"in the \"] [:code [:span \"deps.edn\"]] [:span \" file found in the \"] [:code [:span \"beacon\"]] [:span \" directory, while the \"] [:code [:span \"cider-nrepl\"]] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"alias is defined in the global \"] [:code [:span \"deps.edn\"]] [:span \" at \"] [:code [:span \"~/.clojure\"]] [:span \". We specified the\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"main function in the \"] [:code [:span \"cider-nrepl\"]] [:span \" alias by adding \"] [:code [:span \"-m nrepl.cmdline\"]] [:span \" in \"] [:code [:span \":main-opts\"]] [:span \".\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"That \"] [:code [:span \"nrepl.cmdline\"]] [:span \" function is provided by the \"] [:code [:span \"nrepl/nrepl\"]] [:span \" dependency.\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"Also notice that we're passing the Cider middleware as an nREPL command line parameter.\"]] [:p [:span \"Once you run the command above it should print out the port where nREPL is\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"available, which is a random port, e.g.\"]] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:div.viewer-code [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value \"nREPL server started on port 39209 on host localhost - nrepl://localhost:39209\\n\", :nextjournal/viewer {:name :code, :render-fn #viewer-fn nextjournal.clerk.render/render-code, :hash \"5duGVW4Xoi1QoW73J5wMRghqm9uVoW\"}}]], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:p [:span \"To connect Calva to the running nREPL, type \"] [:code [:span \"ctrl+alt+c\"]] [:span \" + \"] [:code [:span \"ctrl+alt+c\"]] [:span \". A\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"file named \"] [:code [:span \"output.calva-repl\"]] [:span \" should automatically open. When you evaluate\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"Clojure expressions, the results are printed out in that file.\"]] [\"h2\" {:id \"starting_the_beacon_api\"} [:span \"Starting The Beacon API\"]] [:p [:span \"Open the \"] [:code [:span \"beacon/development/src/user.clj\"]] [:span \" file and look for the \"] [:code [:span \"(go :v1)\"]] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"expression that is located in a \"] [:code [:span \"comment\"]] [:span \" expression. Place the cursor\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"either somewhere inside the \"] [:code [:span \"(go :v1)\"]] [:span \" expression or at its beggining, and\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"then type \"] [:code [:span \"alt+enter\"]] [:span \" to evaluate the expression at the cursor. That's the\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"keybinding on Linux, but if it doesn't work on Windows type \"] [:code [:span \"ctrl+shift+p\"]] [:span \" to\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"open the vscode command list and then type \\\"calva eval current form\\\" to\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"search for the command. The keybinding should be displayed in the results.\"]] [\"h2\" {:id \"running_tests\"} [:span \"Running Tests\"]] [:p [:span \"Open any test file, type \"] [:code [:span \"ctrl+shift+p\"]] [:span \" and then type \\\"calva run test\\\". It\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"shows all the Calva commands available for running tests. The test results\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:span \" \"], :nextjournal/viewer {:name :html, :render-fn #viewer-fn identity, :hash \"5dqwbRQVFnHkdooT8QV8nfPHBGVWtj\"}}] [:span \"are printed in the \"] [:code [:span \"output.calva-repl\"]] [:span \" file.\"]]], :nextjournal/viewer {:name :html-, :render-fn #viewer-fn identity, :hash \"5dsKyVZX2dPvsyoeg6dNrfeuqAh5UK\"}}], :css-class nil}, :nextjournal/viewer {:name :clerk/notebook, :render-fn #viewer-fn nextjournal.clerk.render/render-notebook, :hash \"5dt1qwFEn2BQwdEM84VqwY4LR6p4YV\"}}, :error nil}"
viewer.set_state(viewer.read_string(state))
viewer.mount(document.getElementById('clerk'))
const ws = new WebSocket(document.location.origin.replace(/^http/, 'ws') + '/_ws')
ws.onmessage = viewer.onmessage;
window.ws_send = msg => ws.send(msg)</script></body></html>